"use strict";(()=>{var e={};e.id=829,e.ids=[829],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},80665:e=>{e.exports=require("dns")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},74026:e=>{e.exports=require("string_decoder")},82452:e=>{e.exports=require("tls")},74175:e=>{e.exports=require("tty")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},85941:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{GET:()=>m});var s=t(49303),n=t(88716),a=t(60670),i=t(87070),p=t(2021),c=t(93475),l=t(57435);async function m(e){let r=Date.now(),t={status:"healthy",timestamp:new Date().toISOString(),uptime:process.uptime(),version:process.env.npm_package_version||"1.0.0",environment:"production",services:{}};try{try{let e=Date.now();await (0,p.u)(),t.services.mongodb={status:"healthy",responseTime:`${Date.now()-e}ms`,timestamp:new Date().toISOString()}}catch(e){t.services.mongodb={status:"unhealthy",error:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()},t.status="degraded"}try{let e=Date.now();await c.T8.ping(),t.services.redis={status:"healthy",responseTime:`${Date.now()-e}ms`,timestamp:new Date().toISOString()}}catch(e){t.services.redis={status:"unhealthy",error:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()},t.status="degraded"}t.services.system={memory:{used:Math.round(process.memoryUsage().heapUsed/1024/1024),total:Math.round(process.memoryUsage().heapTotal/1024/1024),external:Math.round(process.memoryUsage().external/1024/1024)},cpu:{usage:process.cpuUsage()},platform:process.platform,nodeVersion:process.version},t.responseTime=`${Date.now()-r}ms`,l.kg.info("Health Check",{status:t.status,responseTime:t.responseTime,services:t.services});let e="healthy"===t.status?200:503;return i.NextResponse.json(t,{status:e})}catch(e){return l.kg.error("Health Check Error",{error:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),i.NextResponse.json({status:"unhealthy",error:"Health check failed",timestamp:new Date().toISOString()},{status:503})}}let u=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/health/route",pathname:"/api/health",filename:"route",bundlePath:"app/api/health/route"},resolvedPagePath:"C:\\Users\\aluno\\OneDrive\\Desktop\\clipeiro\\app\\api\\health\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:g}=u,v="/api/health/route";function f(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},57435:(e,r,t)=>{t.d(r,{kg:()=>c});var o=t(94624),s=t.n(o),n=t(55315),a=t.n(n);let i=s().format.combine(s().format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),s().format.errors({stack:!0}),s().format.json(),s().format.prettyPrint()),p=[new(s()).transports.File({filename:a().join(process.cwd(),"logs","error.log"),level:"error",maxsize:5242880,maxFiles:5,format:i}),new(s()).transports.File({filename:a().join(process.cwd(),"logs","combined.log"),maxsize:5242880,maxFiles:5,format:i}),new(s()).transports.Console({level:"info",format:s().format.combine(s().format.colorize(),s().format.simple())})],c=s().createLogger({level:process.env.LOG_LEVEL||"info",format:i,transports:p,exitOnError:!1})},2021:(e,r,t)=>{t.d(r,{u:()=>p});var o=t(11185),s=t.n(o);let n=process.env.MONGODB_URI||"mongodb+srv://clipeiroai:otaviosnow2012@cluster0.0afjdgs.mongodb.net/clipeiro?retryWrites=true&w=majority&appName=Cluster0";process.env.MONGODB_URI||console.warn("⚠️ MONGODB_URI n\xe3o definida nas vari\xe1veis de ambiente");let a={bufferCommands:!1,maxPoolSize:10,serverSelectionTimeoutMS:5e3,socketTimeoutMS:45e3,family:4,retryWrites:!0,w:"majority"},i=global.mongoose;async function p(){if(i.conn)return i.conn;i.promise||(i.promise=s().connect(n,a).then(e=>(console.log("✅ MongoDB connected successfully"),e)).catch(e=>{throw console.error("❌ MongoDB connection failed:",e.message),e}));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}i||(i=global.mongoose={conn:null,promise:null})},93475:(e,r,t)=>{t.d(r,{T8:()=>p});var o=t(62197),s=t.n(o);let n=process.env.REDIS_URL||"redis://localhost:6379",a=process.env.REDIS_PASSWORD||"clipeiro2024",i={host:process.env.REDIS_HOST||"localhost",port:parseInt(process.env.REDIS_PORT||"6379"),password:a,retryDelayOnFailover:100,maxRetriesPerRequest:3,lazyConnect:!0,keepAlive:3e4,connectTimeout:1e4,commandTimeout:5e3,retryDelayOnClusterDown:300,enableReadyCheck:!1,maxRetriesPerRequest:null},p=new(s())(n,i);new(s())(n,i),new(s())(n,i),p.on("connect",()=>{console.log("✅ Redis connected successfully")}),p.on("error",e=>{console.error("❌ Redis connection error:",e)}),p.on("ready",()=>{console.log("\uD83D\uDE80 Redis ready for operations")})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972,783],()=>t(85941));module.exports=o})();